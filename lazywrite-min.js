/*
 * LazyWrite - deferred document.write implementation
 * Version: 1.0 beta build 20110608
 * Website: http://github.com/xfsn/LazyWrite
 *
 * Copyright (c) 2011 Shen Junru
 * Released under the MIT License.
 */
(function(c,i,G,m){var C=1,a=i?"onreadystatechange":"onload",n=/^\s*<!--/,o="lazy-holder-",K="text/lazyjs",f=c.write,q=c.writeln,b=f.apply?function(){f.apply(c,arguments)}:f,d=c.createDocumentFragment(),J=c.createElement("div"),A=m,j=m,v=m,u=m,E=[],e=[],l=m,s=false,y=true,k=[].join,w=function(O){l.ex.push(O)},r=function(P,O){return P.appendChild(O)},D=function(O){return O.parentNode?O.parentNode.removeChild(O):O},N=function(P,O){return P.parentNode.replaceChild(O,P)&&O},H=function(){return c.createElement("span")},x=function t(P){var O=c.createElement("script");O.type=P.type;if(P.src){O.src=P.src}else{O.text=P.text}return O},F=function(P,O){if(O.src){O[a]=function(){var R=i&&O.readyState;if(!O.done&&(!R||/complete|loaded/.test(R))){if(R==="loaded"&&!O.loaded){O.loaded=true;setTimeout(arguments.callee)}else{O.done=true;O[a]=null;D(P);if(j===O){j=m;B()}}}};j=O;setTimeout(function(){r(P,O)})}else{try{G(O.text.replace(n,""))}catch(Q){w(Q)}D(P)}},h=function(O){if(O){if(!j){A=O.holder}F(O.holder,O.script=x(O.script));return !O.script.src}},p=function(O){while((O=h(e.shift()))){}return O!==false&&!j},L=function(R,S,Q){if(i){J.innerHTML="<img />"+S;D(J.firstChild)}else{J.innerHTML=S}var P=[],O=J.getElementsByTagName("script");while(O[0]){P.push({script:O[0],holder:N(O[0],element=H())})}e=P.concat(e);while(J.firstChild){d.appendChild(J.firstChild)}if(v===R){u.parentNode.insertBefore(d,u)}else{u=d.appendChild(u||H());Q?R.parentNode.insertBefore(d,R.nextSibling):N(R,d)}v=R;if(P.length){y=p()}return y},z=function(O){return O&&O.html&&L(c.getElementById(O.id),O.html)},M=function(){while(z(l=E.shift())){}if(y&&!E.length){u&&D(u);d=J=A=j=v=u=m;c.write=f;c.writeln=q}},B=function(){y=true;if(p()){try{l.cb&&l.cb(l)}catch(O){w(O)}M()}},g=function(P,O,Q){if(typeof Q!=="function"){Q=m}if(typeof O==="function"){Q=O,O=m}O||b('<span id="'+(O=o+C++)+'"></span>');E.push({id:O,html:P,cb:Q,ex:[]})},I=function(){var P=k.call(arguments,"");if(P){if(s){try{L(A,P,true)}catch(O){w(O)}}else{g(P)}}};(window.LazyWrite={write:b,render:g,prepare:function(){c.writeln=c.write=I},process:function(){if(s){return}s=true;M()},findScripts:function(S){S=S||K;var R,P,Q=0,O=[].slice.call(c.querySelectorAll?c.querySelectorAll('script[type="'+S+'"]'):c.getElementsByTagName("script"));for(;Q<O.length;Q++){if(S===O[Q].type){N(O[Q],R=H());if(P=O[Q].getAttribute("require")){r(J,c.createElement("script")).src=P}r(J,O[Q]);g(J.innerHTML,R.id=o+C++);J.innerHTML=""}}}}).prepare()})(document,/*@cc_on!@*/!1,function(){eval.apply(window,arguments)});
