/*!
 * LazyWrite - deferred document.write implementation
 * Version: 1.1 build 20111012
 * Website: http://github.com/xfsn/LazyWrite
 *
 * Copyright (c) 2011 Shen Junru
 * Released under the MIT License.
 */
(function(O,d,j,J,o){var F=1,a=j?"onreadystatechange":"onload",p=/^\s*<!--/,q="lazy-holder-",R="text/lazyjs",l="",N="",Q=/<([a-z]+)(?:\s+[a-z]+(?:=(?:'[^']*'|"[^"]*"|[^'">\s]*))?)*\s*>/i,U=function(Z){var Y,X,W=Q.exec(Z);while(W){X=W[1];if(-1===(Y=Z.indexOf("</"+X+">",W[0].length))){return N=X}else{W=Q.exec(Z=Z.slice(Y+X.length+3))}}},w=function(W){return !N||(-1!==W.indexOf("</"+N+">"))},b=O.onerror,g=d.write,s=d.writeln,c=g.apply?function(){g.apply(d,arguments)}:g,e=d.createDocumentFragment(),P=d.createElement("div"),D=o,k=o,y=o,x=o,H=[],f=[],n=o,u=false,B=true,m=[].join,z=function(W){n.ex.push(W)},t=function(X,W){return X.appendChild(W)},G=function(W){return W.parentNode?W.parentNode.removeChild(W):W},V=function(X,W){return X.parentNode.replaceChild(W,X)&&W},K=function(){return d.createElement("span")},A=function v(X){var W=d.createElement("script");W.type=X.type;if(X.src){W.src=X.src}else{W.text=X.text}return W},L=function(X,W){clearTimeout(W._tid);W.done=true;W[a]=W.onerror=null;G(X);if(k===W){k=o;E()}},I=function(X,W){if(W.src){W[a]=function(){var Z=j&&W.readyState;if(!W.done&&(!Z||/complete|loaded/.test(Z))){if(Z==="loaded"&&!W.loaded){W.loaded=true;setTimeout(arguments.callee)}else{L(X,W)}}};W.onerror=function(Z){W._error=Z;z(Z);L(X,W)};k=W;setTimeout(function(){t(X,W)});W._tid=setTimeout(function(){z("unknow");L(X,W)},60500)}else{try{J(W.text.replace(p,""))}catch(Y){z(Y)}G(X)}},i=function(W){if(W){if(!k){D=W.holder}I(W.holder,W.script=A(W.script));return !W.script.src}},r=function(W){while((W=i(f.shift()))){}return W!==false&&!k},S=function(aa,ab,Y){if(j){P.innerHTML="<img />"+ab;G(P.firstChild)}else{P.innerHTML=ab}var X=[],W=P.getElementsByTagName("script"),ac,Z;while(W[0]){X.push({script:W[0],holder:V(W[0],element=K())})}while(P.firstChild){e.appendChild(P.firstChild)}if(y===aa){f=(Z=f.n.slice(f.l-f.length).concat(X)).concat(ac=f.o);f.n=Z;f.o=ac;x.parentNode.insertBefore(e,x)}else{f=X.concat(ac=f);f.n=X;f.o=ac;x=e.appendChild(x||K());Y?aa.parentNode.insertBefore(e,aa.nextSibling):V(aa,e)}f.l=f.length;y=aa;if(B&&X.length){B=r()}return B},C=function(W){return W&&W.html&&S(d.getElementById(W.id),W.html)},T=function(){while(C(n=H.shift())){}if(B&&!H.length){x&&G(x);e=P=D=k=y=x=o;d.write=g;d.writeln=s}},E=function(){B=true;if(r()){try{n.cb&&n.cb(n.ex)}catch(W){z(W)}T()}},h=function(X,W,Y){if(typeof Y!=="function"){Y=o}if(typeof W==="function"){Y=W,W=o}W||c('<span id="'+(W=q+F++)+'"></span>');H.push({id:W,html:X,cb:Y,ex:[]})},M=function(){var X=m.call(arguments,"");if(X){if(U(X)){return l+=X}else{if(w(X)){X=l+X,N=l="";if(u){try{S(D,X,true)}catch(W){z(W)}}else{h(X)}}else{l+=X}}}};(O.LazyWrite={write:c,render:h,prepare:function(){d.writeln=d.write=M},process:function(){if(u){return}u=true;T()},findScripts:function(ab){ab=ab||R;var ac=d.getElementsByTagName("script"),aa,Y,X,Z=0,W=[];if(ac){for(X=ac.length;Z<X;Z++){W[Z]=ac[Z]}for(Z=0;Z<X;Z++){if(ab===W[Z].type){V(W[Z],aa=K());if(Y=W[Z].getAttribute("require")){t(P,d.createElement("script")).src=Y}t(P,W[Z]);h(P.innerHTML,aa.id=q+F++);P.innerHTML=""}}}}}).prepare();O.onerror=function(X,W){if(k&&(W===k.src)&&!k._error){z(X)}b&&b.apply(O,arguments)}})(window,document,/*@cc_on!@*/!1,function(){eval.apply(window,arguments)});
